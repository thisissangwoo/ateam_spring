<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="wnotice.mapper">

<!-- 공지사항 전체 글 목록 조회 -->  

	<select id="list" resultType="web_notice.NoticeVO">
	 	select rownum no, n.*, (select user_name from anafor_user where user_id = n.writer) name
	 	from (select * from notice where code = 'N01' order by id) n
	 	order by no desc
	</select>

<!-- 공지글 상세 내용 조회 -->

	<select id="detail" resultType="web_notice.NoticeVO">
		select n.*, (select user_name from anafor_user where user_id = n.writer) name
		from notice n
		where id = #{id}
		and code = 'N01'
	</select>

<!-- 상세화면 조회 전 조회수 증가(변경) -->
	<update id="read">
		update notice set readcnt = readcnt + 1
		where id = #{id}
	</update>	
	
</mapper>